<div class="container">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="w3-white material-shadow safe-box">
                <div class="safe-box-header w3-large" style="padding: 5px!important">
                     طباعة الشهادة
                </div>
                <div class="border-bottom-dashed"></div>
                <br>

                <div class="safe-box-body ">


                    <div class="custom-panel w3-display-container w3-round application-panel student-info-panel">
                        <div class="custom-panel-title">{{ "student info" | trans }}</div>
                        <div class="custom-panel-body">


                            <div class="row">

                                <div class="col-lg-2 col-md-2 col-sm-2">
                                    <img [src]="student.image" class="w3-round w3-block">
                                </div>
                                <div class="col-lg-10 col-md-10 col-sm-12">
                                    <br>
                                    <div class="custom-panel w3-display-container w3-round application-panel student-info-panel">
                                        <div class="custom-panel-title">{{ "student search" | trans }}</div>
                                        <div class="custom-panel-body w3-display-container">
                                            <input class="w3-round-xxlarge w3-white w3-input border-gray search-input " style="width: 100%!important" (keyup)="searchInputEvent()" placeholder="{{ 'search with student name code national_id' | trans }}" [(ngModel)]="searchKey">

                                            <div class="w3-display-topleft w3-padding" (click)="selectStudent({})" *ngIf="searchKey && !studentSearchDialogLoader" style="top: 12px;left:5%;z-index:10;">
                                                <span class="fa fa-close w3-text-red"></span>
                                            </div>

                                            <div class="w3-display-topleft w3-padding" *ngIf="studentSearchDialogLoader" style="top: 12px;left:5%;z-index:10;">
                                                <span class="fa fa-spin fa-spinner w3-text-indigo"></span>
                                            </div>


                                            <div class="w3-display-topright w3-white material-shadow" *ngIf="studentSearchDialogShow" style="top: 47px;right:11px;z-index:10;width: 100%">
                                                <div class="w3-display-conitainer">
                                                    <span class="w3-display-topright w3-button fa fa-close" (click)="studentSearchDialogShow=false"></span>
                                                    <br>
                                                    <ul class="w3-ul">
                                                        <li *ngFor="let item of students" style="cursor: pointer;" class="w3-hover-light-gray w3-block text-right">
                                                            <div class="media" (click)="selectStudent(item)">
                                                                <div class="media-left">
                                                                    <a href="#">
                                                                        <img [src]="item.image" style="width: 30px;height: 30px;" class="w3-circle" alt="">
                                                                        <!--
                                  <span class="fa fa-user-circle w3-text-indigo w3-large" ></span>
                                  -->
                                                                    </a>
                                                                </div>
                                                                <div class="media-body">
                                                                    <h4 class="media-heading" [innerHTML]="item.name"></h4>
                                                                    <span [innerHTML]="item.code" class="w3-large"></span>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <div style="display: flex; gap:25px">
  <label> تاريخ الاعتماد</label>
                                    <input style="width: 50%;"type="date" class="form-control"  [(ngModel)]="datecert">
                                    </div>
                                  
<br>
                                         <!-- <button (click)="load()" mat-raised-button color="primary" class="w3-margin-left w3-red"> <i class="fa fa-send-o" ></i>  طباعة  </button> -->
    <button   mat-raised-button color="primary" class="w3-margin-left w3-red"> <i class="fa fa-send-o" ></i>     
                                    <span *ngIf="!isSubmittedPrint"  (click)="load()" >اظهر الشهاده</span>
          <span *ngIf="isSubmittedPrint" class="fa fa-spin fa-spinner" ></span>
                                  </button>
                               <button *ngIf="isSubmittedPrintafter"  mat-raised-button color="primary" class="w3-margin-left w3-red"> <i class="fa fa-send-o" ></i>     
                                    <span    (click)="printContent()" >طباعة الشهاده</span>
                                   </button>     
                                </div>

                            </div>
      <div class="">
                <div class="custom-panel w3-display-container w3-round application-panel student-info-panel" id="printable">

                    <div dir="rtl" class="custom-panel-body table-responsive w3-padding" id="reportContent">


                    </div>
                </div>
            </div>


                        </div>
                    </div>


                    <div>
 
                    </div>




                </div>


            </div>
        </div>
    </div>
</div>



<div class="modal fade" tabindex="-1" role="dialog" id="studentRegisterCourseModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">{{ "student register document" | trans }}</h4>
            </div>
            <div id="printable" class="modal-body">
                <div class="title">
                    <div class="text">
                        <h6>وزارة التعليم العالي</h6>
                        <h6>المعهد العالي للإدارة بالمحلة الكبري</h6>
                    </div>
                    <div class="image">
                        <img style="width: 20%;" src="http://him-ma.site/logo.png" alt="">
                    </div>
                </div>
                <table class="table table-bordered" style="width: 100%" style="direction: rtl;">
                    <tr>
                        <td colspan="5">
                            <b>{{ "student name" | trans }}</b> : {{ student.name }}
                        </td>
                        <td colspan="5">
                            <b>{{ "student code" | trans }}</b> : {{ student.code }}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5">
                            <b>{{ "national id" | trans }}</b> : {{ student.national_id }}
                        </td>
                        <td colspan="5">
                            <b>{{ "gpa" | trans }}</b> : {{ student.gpa }}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5">
                            <b>{{ "level" | trans }}</b> : {{ student.level? student.level.name : '' }}
                        </td>
                        <td colspan="5">
                            <b>{{ "department" | trans }}</b> : {{ student.division? student.division.name : '' }}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5">
                            <b>{{ "case constraint" | trans }}</b> : {{ student.case_constraint? student.case_constraint.name : '' }}
                        </td>
                        <td colspan="5">
                            <b>{{ "constraint status" | trans }}</b> : {{ student.registeration_status? student.registeration_status.name : '' }}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5">
                            <b>{{ "register hours total" | trans }}</b> : {{ student.register_hours }}
                        </td>
                        <td colspan="5">
                            <b>{{ "student register courses count" | trans }}</b> : <span *ngIf="student.courses">{{
                              student.courses.length }}</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5">
                            <b>{{ "gpa" | trans }}</b> : {{ student.gpa }}
                        </td>
                        <td colspan="5">
                            <b>{{ "total registeration required hours" | trans }}</b> : <span *ngIf="academicSetting.has(8)">{{
                              academicSetting.get(8).value }}</span>
                        </td>
                    </tr>
                    <ng-container *ngFor="let level of student.academic_document">
                        <tr>
                            <th class="text-center w3-dark-gray" colspan="10" style="text-align: center;">
                                {{ "level" | trans }} - {{ level.name }}
                            </th>
                        </tr>
                        <ng-container *ngFor="let academicYear of level.terms | keyvalue">
                            <ng-container *ngFor="let term of academicYear.value">
                                <tr>
                                    <th colspan="10" class="text-center w3-light-gray" style="text-align: center;">
                                        {{ term.name + " - " + term.academic_year }}
                                    </th>
                                </tr>
                    
                                <tr>
                                    <th>#</th>
                                    <th>{{ "code" | trans }}</th>
                                    <th>{{ "name" | trans }}</th>
                                    <th>{{ "division" | trans }}</th>
                                    <th>{{ "credit_hour" | trans }}</th>
                                    <th>{{ "degree" | trans }}</th>
                                    <th>{{ "student_mark" | trans }}</th>
                                    <th>{{ "register_date" | trans }}</th>
                                    <th>{{ "gpa" | trans }}</th>
                                </tr>
                                <tr *ngFor="let course of term.courses; index as counter">
                                    <td>{{ counter + 1 }}</td>
                                    <td>{{ course.code }}</td>
                                    <td>{{ course.name }}</td>
                                    <td>{{ course.division ? course.division.name : '' }}</td>
                                    <td>{{ course.credit_hour }}</td>
                                    <td>{{ course.large_degree }}</td>
                                    <td>{{ course.gpa_word }}</td>
                                    <td>{{ course.created_at | date: 'yyyy-MM-dd' }}</td>
                                    <td>{{ course.gpa }}</td>
                                </tr>
                                <tr *ngIf="term.courses.length == 0 && term.case_constraint_excuse == null">
                                    <td colspan="9" class="text-center">لم يتم تسجيل الارشاد الاكاديمى</td>
                                </tr>
                                
                                <tr *ngIf="term.case_constraint_excuse != null">
                                    <td colspan="9" class="text-center"> 
                                        عذر بموافقة الوزاره عن {{ term.name }} رقم القرار {{ term.case_constraint_excuse.acceptance_code }}  </td>
                                </tr>
                                <tr *ngIf="term.courses.length > 0">
                                    <td>المعدل التراكمي للتيرم</td>
                                    <td>{{ term.gpa_fasly }}</td>
                                </tr>
                             </ng-container>
                        </ng-container>
                    </ng-container>

                </table>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" mat-raised-button data-dismiss="modal" style="margin: 5px;">{{
                  "close" | trans }}</button>
                <button type="button" class="w3-black" mat-raised-button (click)="print()" style="margin: 5px;">{{
                  "print" |
                  trans }}</button>
                <button type="button" class="w3-green" mat-raised-button (click)="exportExcel()" style="margin: 5px;">{{
                  "excel"
                  | trans }}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display4}" style="background-color: rgba(90,90,90,0.5);">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="    margin-top: 150px;">
            <div class="modal-header" style="background-color:#b10d0d;">
                <button type="button" class="close" aria-label="Close" (click)="onCloseModal4()">
    <span aria-hidden="true" style="color: #fff">&times;</span>
  </button>

                <p class="modal-title" style="color: #fff">
                    <span style="vertical-align: middle; padding-left:8px">
تنبيه                </span>
                </p>

            </div>

            <div class="modal-body">

                <p>لقد تخطيت &nbsp; {{student.register_hours}} &nbsp; من عدد الساعات المسموح بها

                </p>
                <br>
                <input type="text" class="form-control" [(ngModel)]="valepa2" placeholder=" ادخل الرقم السرى">

            </div>




            <div class="modal-footer">
                <button class="btn btn-white bbtclose" (click)="onCloseModal4()">
    <!-- Annulla -->
    الغاء
  </button>
                <button class="btn btn_color w-40 h-12" style="color: white;
  background-color:#ad0a0a;;
  width: 100px;
  height: 45px;  line-height: 15px;" (click)="increaseTimes()">
تخطى
</button>
                <!-- Confirm -->

            </div>


        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display10}" style="background-color: rgba(90,90,90,0.5);">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="    margin-top: 150px;">
            <div class="modal-header" style="background-color:#b10d0d;">
                <button type="button" class="close" aria-label="Close" (click)="onCloseModal10()">
    <span aria-hidden="true" style="color: #fff">&times;</span>
  </button>

                <p class="modal-title" style="color: #fff">
                    <span style="vertical-align: middle; padding-left:8px">
الاسباب                </span>
                </p>

            </div>

            <div class="modal-body">

 <table calss="table" >
    <tr>
        <th>الكود</th>
        <th>نوع القيد</th>

        <th>التاريخ</th>
        <th>السبب</th>

        </tr>
        <tr *ngFor="let item of resonsss">
<td>{{item?.acceptance_code}}</td>
<td>{{item?.case_constraint?.name}}</td>

<td>{{item?.acceptance_date}}</td>
<td>{{item?.reason}}</td>

        </tr>
 </table>
            </div>




            <div class="modal-footer">
                <button class="btn btn-white bbtclose" (click)="onCloseModal10()">
    <!-- Annulla -->
    الغاء
  </button>
                
                <!-- Confirm -->

            </div>


        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>